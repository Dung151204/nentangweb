<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Qu·∫£n l√Ω Giao d·ªãch</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="buoi8.css">

  <!-- Bootstrap & FontAwesome -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- jQuery & Validate -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.5/dist/jquery.validate.min.js"></script>
</head>
<body>

 <div class="wrapper d-flex flex-column min-vh-100">
    <!-- NAV -->
    <nav class="navbar navbar-dark bg-dark px-4">
      <span class="navbar-brand fw-bold">Tr∆∞·ªùng ƒê·∫°i h·ªçc Th·ªßy L·ª£i</span>
      <div class="d-flex ms-auto align-items-center">
        <a class="nav-link text-white me-3" href="#">Trang ch·ªß</a>
        <a class="nav-link text-white me-3" href="#">Qu·∫£n l√Ω c·ª≠a h√†ng</a>
        <form class="d-flex ms-auto w-auto">
          <input class="form-control form-control-sm me-2" type="search" placeholder="Nh·∫≠p n·ªôi dung t√¨m ki·∫øm">
          <button class="btn btn-success px-3 py-1" type="submit" style="white-space: nowrap; min-width: 100px;">T√åM KI·∫æM</button>
        </form>
      </div>
    </nav>

    <!-- MAIN -->
    <div class="container mt-3 mb-4">
      <div class="d-flex justify-content-between mb-2">
        <div>
          <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addModal">
            <i class="fas fa-plus-circle"></i> TH√äM M·ªöI
          </button>
          <button class="btn btn-light border">
            <i class="fas fa-file-export"></i> XU·∫§T RA FILE
          </button>
        </div>
        <div class="input-group w-50">
          <span class="input-group-text"><i class="fas fa-arrow-right"></i></span>
          <input type="text" class="form-control" placeholder="T√¨m ki·∫øm theo T√™n">
        </div>
        <select class="form-select w-auto">
          <option selected>20</option>
        </select>
      </div>

      <table class="table table-bordered text-center align-middle">
        <thead class="table-dark">
          <tr>
            <th>
              <button class="btn btn-outline-dark btn-sm rounded-1 px-2 py-1 me-3">
                <i class="bi bi-caret-down-fill"></i>
              </button>
            </th>
            <th>H√†nh ƒë·ªông</th>
            <th>STT</th>
            <th>T√™n</th>
            <th>H·ªç ƒë·ªám</th>
            <th>ƒê·ªãa ch·ªâ</th>
            <th>Ng√†y Mua</th>
          </tr>
        </thead>
        <tbody id="data-body">
          <!-- D·ªØ li·ªáu s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JS -->
        </tbody>
      </table>
    </div>

    <!-- FOOTER -->
    <footer class="bg-primary text-white text-start py-3 ps-3 mt-auto">
      <strong>TR∆Ø·ªúNG ƒê·∫†I H·ªåC TH·ª¶Y L·ª¢I</strong><br />
      ƒê·ªãa ch·ªâ: 175 T√¢y S∆°n, ƒê·ªëng ƒêa, H√† N·ªôi<br />
      ƒêi·ªán tho·∫°i: (024) 38522201 - Fax: (024) 35633351<br />
      Email: phongctct@tlu.edu.vn
    </footer>
  </div>

<!-- Modal -->
<div class="modal fade" id="addModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <form class="modal-content" id="formAdd">
      <div class="modal-header">
        <h5 class="modal-title">Th√™m giao d·ªãch</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <div class="mb-2">
          <label>Kh√°ch h√†ng</label>
          <input type="text" id="customer" name="customer" class="form-control">
          <div id="error-customer" class="form-text text-danger"></div>
        </div>
        <div class="mb-2">
          <label>Nh√¢n vi√™n</label>
          <input type="text" id="staff" name="staff" class="form-control">
          <div id="error-staff" class="form-text text-danger"></div>
        </div>
        <div class="mb-2">
          <label>S·ªë ti·ªÅn</label>
          <input type="number" id="amount" name="amount" class="form-control">
          <div id="error-amount" class="form-text text-danger"></div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">H·ªßy</button>
        <button type="submit" class="btn btn-success">Th√™m</button>
      </div>
    </form>
  </div>
</div>



<script>
  let idCounter = 1;

  // H√†m ƒë·ªãnh d·∫°ng ng√†y ki·ªÉu Vi·ªát Nam: "02 Th√°ng 8 2025 13:59"
  function formatVietnameseDate(dateObj) {
    const day = dateObj.getDate().toString().padStart(2, "0");
    const month = dateObj.getMonth(); // t·ª´ 0 ƒë·∫øn 11
    const year = dateObj.getFullYear();
    const hour = dateObj.getHours().toString().padStart(2, "0");
    const minute = dateObj.getMinutes().toString().padStart(2, "0");

    const monthNames = [
      "Th√°ng 1", "Th√°ng 2", "Th√°ng 3", "Th√°ng 4", "Th√°ng 5", "Th√°ng 6",
      "Th√°ng 7", "Th√°ng 8", "Th√°ng 9", "Th√°ng 10", "Th√°ng 11", "Th√°ng 12"
    ];

    return `${day} ${monthNames[month]} ${year} ${hour}:${minute}`;
  }

  $(document).ready(function () {
    $("#formAdd").validate({
      rules: {
        customer: {
          required: true,
          maxlength: 30
        },
        staff: {
          required: true,
          maxlength: 30
        },
        amount: {
          required: true,
          number: true,
          min: 0
        }
      },
      messages: {
        customer: {
          required: "Vui l√≤ng nh·∫≠p t√™n kh√°ch h√†ng",
          maxlength: "T√™n kh√°ch h√†ng kh√¥ng v∆∞·ª£t qu√° 30 k√Ω t·ª±"
        },
        staff: {
          required: "Vui l√≤ng nh·∫≠p t√™n nh√¢n vi√™n",
          maxlength: "T√™n nh√¢n vi√™n kh√¥ng v∆∞·ª£t qu√° 30 k√Ω t·ª±"
        },
        amount: {
          required: "Vui l√≤ng nh·∫≠p s·ªë ti·ªÅn",
          number: "S·ªë ti·ªÅn ph·∫£i l√† s·ªë h·ª£p l·ªá",
          min: "S·ªë ti·ªÅn kh√¥ng ƒë∆∞·ª£c √¢m"
        }
      },
      errorPlacement: function (error, element) {
        const id = element.attr("id");
        $(`#error-${id}`).html(error);
      },
      success: function (label, element) {
        const id = $(element).attr("id");
        $(`#error-${id}`).html("");
      },

      // ƒê√¢y l√† ph·∫ßn b·∫°n c·∫ßn: submitHandler
      submitHandler: function (form) {
        const customer = $("#customer").val().trim();
        const staff = $("#staff").val().trim();
        const amount = $("#amount").val().trim();
        const date = formatVietnameseDate(new Date()); // üî• d√πng h√†m ƒë·ªãnh d·∫°ng
        $("#data-body").append(`
          <tr>
            <td><button class="btn btn-sm btn-danger">X</button></td>
            <td>
              <button class="btn btn-sm btn-view me-1"><i class="fas fa-eye"></i></button>
              <button class="btn btn-sm btn-edit me-1"><i class="fas fa-pen"></i></button>
              <button class="btn btn-sm btn-delete"><i class="fas fa-trash"></i></button>
            </td>
            <td>${idCounter++}</td>
            <td>${customer}</td>
            <td>${staff}</td>
            <td>${parseInt(amount).toLocaleString("vi-VN")}</td>
            <td>${date}</td>
          </tr>
        `);



        form.reset();
        $("#addModal").modal("hide");
      }
    });
  });
</script>

 <!-- DATA & SCRIPT -->
  <script src="data.js"></script>
  <script src="script.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
